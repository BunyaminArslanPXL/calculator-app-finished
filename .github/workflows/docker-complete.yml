name: Docker Example

on: 
  workflow_dispatch

jobs:
  build: 
   runs-on: ubuntu-latest

   steps: 
     - name: Checkout Example
       uses: actions/checkout@v5.0.1
       



     - name: Setup Node.js environment
       uses: actions/setup-node@v6.0.0

     - name: installing node.js dependencies
       run: npm install



     - run: npm test -- --coverage
     - name: Code Coverage Report
       uses: mridang/action-test-reporter@v1
       with:
         github-token: ${{ secrets.GITHUB_TOKEN }}
         coverage-file: ./coverage/clover.xml # Path to your clover, cobertura, jacoco, or lcov file
         working-directory: ./

     - name: Login to Docker Hub
       uses: docker/login-action@v3
       with:
         username: ${{ secrets.DOCKERHUB_USERNAME }}
         password: ${{ secrets.DOCKERHUB_TOKEN }}
               
     - name: Build and push
       uses: docker/build-push-action@v6
       with:
         push: true
         tags: ${{ secrets.DOCKERHUB_USERNAME }}/app:latest
